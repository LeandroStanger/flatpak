From: Simon McVittie <smcv@debian.org>
Date: Tue, 17 Jan 2017 23:47:51 +0000
Subject: testlibrary: ensure that contents_array is NULL-terminated

Otherwise g_strjoinv() wanders off the end into uninitialized memory.

Signed-off-by: Simon McVittie <smcv@debian.org>
---
 tests/testlibrary.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/tests/testlibrary.c b/tests/testlibrary.c
index e41df11..9fdb7be 100644
--- a/tests/testlibrary.c
+++ b/tests/testlibrary.c
@@ -691,6 +691,7 @@ add_extra_installation (const char *id,
   if (priority != NULL)
     g_ptr_array_add (contents_array, g_strdup_printf ("Priority=%s", priority));
 
+  g_ptr_array_add (contents_array, NULL);
   contents_string = g_strjoinv ("\n", (char**)contents_array->pdata);
 
   conffile_path = g_strconcat (flatpak_installationsdir, "/", id, ".conf", NULL);
