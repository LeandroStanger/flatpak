From: Alexander Larsson <alexl@redhat.com>
Date: Tue, 6 Sep 2016 09:26:02 +0200
Subject: utils: Fix support for old glib without g_autoptr

Origin: upstream, 0.6.10, commit:e6a85a7fdd26e55c1a3e5660b5906b492864b14a
---
 common/flatpak-utils.h | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/common/flatpak-utils.h b/common/flatpak-utils.h
index 660903e..8447de1 100644
--- a/common/flatpak-utils.h
+++ b/common/flatpak-utils.h
@@ -25,6 +25,7 @@
 
 #include "libglnx/libglnx.h"
 #include <gio/gio.h>
+#include <gio/gunixfdlist.h>
 #include <libsoup/soup.h>
 #include "flatpak-dbus.h"
 #include "flatpak-dir.h"
@@ -365,6 +366,10 @@ G_DEFINE_AUTOPTR_CLEANUP_FUNC (SoupRequest, g_object_unref)
 G_DEFINE_AUTOPTR_CLEANUP_FUNC (SoupURI, soup_uri_free)
 #endif
 
+#if !GLIB_CHECK_VERSION(2, 43, 4)
+G_DEFINE_AUTOPTR_CLEANUP_FUNC(GUnixFDList, g_object_unref)
+#endif
+
 /* This uses a weird Auto prefix to avoid conflicts with later added autogenerated autoptr support, per:
  * https://git.gnome.org/browse/glib/commit/?id=1c6cd5f0a3104aa9b62c7f1d3086181f63e71b59
  */
