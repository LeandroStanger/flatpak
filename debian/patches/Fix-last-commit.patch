From: Alexander Larsson <alexl@redhat.com>
Date: Mon, 29 Aug 2016 16:15:32 +0200
Subject: Fix last commit

The checks where inverted.

Origin: upstream, 0.6.10, commit:c076b33ba38e1b1f2ba3843530b4ded9c8ea7243
---
 lib/flatpak-installation.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/lib/flatpak-installation.c b/lib/flatpak-installation.c
index 059b60d..0dd11a2 100644
--- a/lib/flatpak-installation.c
+++ b/lib/flatpak-installation.c
@@ -1003,7 +1003,7 @@ flatpak_installation_install_bundle (FlatpakInstallation    *self,
 
   /* Pull, prune, etc are not threadsafe, so we work on a copy */
   dir_clone = flatpak_dir_clone (dir);
-  if (flatpak_dir_ensure_repo (dir_clone, cancellable, error))
+  if (!flatpak_dir_ensure_repo (dir_clone, cancellable, error))
     return NULL;
 
   if (!flatpak_dir_install_bundle (dir_clone, file, NULL, &ref,
@@ -1073,7 +1073,7 @@ flatpak_installation_install_full (FlatpakInstallation    *self,
 
   /* Pull, prune, etc are not threadsafe, so we work on a copy */
   dir_clone = flatpak_dir_clone (dir);
-  if (flatpak_dir_ensure_repo (dir_clone, cancellable, error))
+  if (!flatpak_dir_ensure_repo (dir_clone, cancellable, error))
     return NULL;
 
   /* Work around ostree-pull spinning the default main context for the sync calls */
@@ -1199,7 +1199,7 @@ flatpak_installation_update_full (FlatpakInstallation    *self,
 
   /* Pull, prune, etc are not threadsafe, so we work on a copy */
   dir_clone = flatpak_dir_clone (dir);
-  if (flatpak_dir_ensure_repo (dir_clone, cancellable, error))
+  if (!flatpak_dir_ensure_repo (dir_clone, cancellable, error))
     return NULL;
 
   /* Work around ostree-pull spinning the default main context for the sync calls */
@@ -1305,7 +1305,7 @@ flatpak_installation_uninstall (FlatpakInstallation    *self,
 
   /* prune, etc are not threadsafe, so we work on a copy */
   dir_clone = flatpak_dir_clone (dir);
-  if (flatpak_dir_ensure_repo (dir_clone, cancellable, error))
+  if (!flatpak_dir_ensure_repo (dir_clone, cancellable, error))
     return FALSE;
 
   if (!flatpak_dir_uninstall (dir_clone, ref, FLATPAK_HELPER_UNINSTALL_FLAGS_NONE,
@@ -1528,7 +1528,7 @@ flatpak_installation_update_appstream_sync (FlatpakInstallation *self,
 
   /* Pull, prune, etc are not threadsafe, so we work on a copy */
   dir_clone = flatpak_dir_clone (dir);
-  if (flatpak_dir_ensure_repo (dir_clone, cancellable, error))
+  if (!flatpak_dir_ensure_repo (dir_clone, cancellable, error))
     return FALSE;
 
   if (main_context)
